<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Secure Payment</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">

<style>
:root {
  --green: #22c55e;
  --dark-green: #16a34a;
}

body {
  font-family: 'DM Sans', sans-serif;
  background:
    radial-gradient(circle at top left, #ecfdf5, transparent 40%),
    radial-gradient(circle at bottom right, #f0fdf4, transparent 40%),
    #f9fafb;
  color: #0f172a;
}

/* ===== Layout ===== */
.payment-card {
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(12px);
  border-radius: 26px;
  padding: 34px;
  box-shadow: 0 30px 70px rgba(0,0,0,.12);
}

.section-title {
  font-weight: 700;
  margin-bottom: 20px;
}

/* ===== Tabs ===== */
.pay-tabs {
  display: flex;
  gap: 14px;
  margin-bottom: 24px;
}

.pay-tab {
  padding: 12px 22px;
  border-radius: 999px;
  border: none;
  background: #e5e7eb;
  font-weight: 600;
  cursor: pointer;
  transition: .3s;
}

.pay-tab.active {
  background: linear-gradient(135deg,var(--green),var(--dark-green));
  color: white;
}

/* ===== Inputs ===== */
.input {
  width: 100%;
  padding: 14px 16px;
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  margin-bottom: 14px;
}

/* ===== Price Rail ===== */
.price-rail {
  position: sticky;
  top: 30px;
  background: rgba(255,255,255,.95);
  backdrop-filter: blur(12px);
  border-radius: 24px;
  padding: 32px;
  box-shadow: 0 30px 70px rgba(0,0,0,.12);
}

.price-row {
  display: flex;
  justify-content: space-between;
  margin-top: 14px;
  font-weight: 500;
}

.total {
  font-size: 22px;
  font-weight: 700;
  color: var(--dark-green);
  margin-top: 18px;
}

/* ===== Pay Button ===== */
.pay-btn {
  width: 100%;
  margin-top: 26px;
  padding: 20px;
  background: linear-gradient(135deg,var(--green),var(--dark-green));
  color: white;
  border: none;
  border-radius: 18px;
  font-weight: 700;
  position: relative;
  overflow: hidden;
}

.pay-btn::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg,transparent 20%,rgba(255,255,255,.4),transparent 60%);
  transform: translateX(-100%);
}

.pay-btn:hover::after {
  animation: shine 1.2s ease;
}

@keyframes shine {
  to { transform: translateX(120%); }
}

/* ===== Back ===== */
.back-btn {
  position: fixed;
  top: 24px;
  left: 24px;
  background: white;
  border-radius: 999px;
  padding: 10px 18px;
  border: none;
  box-shadow: 0 10px 30px rgba(0,0,0,.1);
  font-weight: 600;
  color: var(--green);
  z-index: 10;
}
</style>
</head>
<body>

<button class="back-btn" onclick="goBack()">← Back</button>

<div class="container-fluid px-5 py-5">
  <div class="row">

    <!-- LEFT -->
    <div class="col-lg-8">
      <div class="payment-card reveal">

        <h4 class="section-title">Secure Payment</h4>

        <!-- Tabs -->
        <div class="pay-tabs">
          <button class="pay-tab active" data-tab="card">Card</button>
          <button class="pay-tab" data-tab="upi">UPI</button>
        </div>

        <!-- CARD -->
        <div class="pay-panel" id="card">
          <input class="input" placeholder="Card Number">
          <div class="row">
            <div class="col-md-6">
              <input class="input" placeholder="Expiry (MM/YY)">
            </div>
            <div class="col-md-6">
              <input class="input" placeholder="CVV">
            </div>
          </div>
          <input class="input" placeholder="Cardholder Name">
        </div>

        <!-- UPI -->
        <div class="pay-panel" id="upi" style="display:none">
          <input class="input" placeholder="Enter UPI ID (example@upi)">
        </div>

        <button class="pay-btn" onclick="goToPaymentSuccess()">
          Pay Securely →
        </button>

      </div>
    </div>

    <!-- RIGHT -->
    <div class="col-lg-4">
      <aside class="price-rail reveal delay-1">
        <h6>Amount Payable</h6>

        <div class="price-row">
          <span>Base Fare</span>
          <strong>SAR <span id="base"></span></strong>
        </div>

        <div class="price-row">
          <span>Taxes</span>
          <strong>SAR <span id="tax"></span></strong>
        </div>

        <div class="total">
          Total SAR <span id="total"></span>
        </div>
      </aside>
    </div>

  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
/* ===== DATA ===== */
const data = JSON.parse(localStorage.getItem("reviewData"));
document.getElementById("base").innerText = data.baseFare;
document.getElementById("tax").innerText = data.taxes;
document.getElementById("total").innerText = data.total;

/* ===== TAB SWITCH ===== */
document.querySelectorAll(".pay-tab").forEach(tab => {
  tab.onclick = () => {
    document.querySelectorAll(".pay-tab").forEach(t => t.classList.remove("active"));
    tab.classList.add("active");

    document.querySelectorAll(".pay-panel").forEach(p => p.style.display = "none");
    const panel = document.getElementById(tab.dataset.tab);
    panel.style.display = "block";

    gsap.from(panel, {opacity:0, y:20, duration:.6, ease:"power3.out"});
  };
});

/* ===== PAGE ANIMATIONS ===== */
gsap.from(".reveal", {
  opacity: 0,
  y: 60,
  duration: 1.2,
  stagger: 0.2,
  ease: "expo.out"
});

/* ===== BACK ===== */
function goBack() {
  gsap.to("body", {
    opacity: 0,
    y: 40,
    duration: .6,
    ease: "power4.in",
    onComplete: () => {
      window.location.href = "review.html";
    }
  });
}
</script>
<script src="./main.js"></script>
</body>
</html>
