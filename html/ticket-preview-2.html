<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Ticket</title>

<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --primary:#2563eb;
  --primary-glow:#3b82f6;
  --bg:#05070b;
  --card:#ffffff;
  --text:#ffffff;
  --muted:#9ca3af;
  --border:#e5e7eb;
}

*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  font-family:'DM Sans',sans-serif;
  background:var(--bg);
  color:var(--text);
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== Ambient Background ===== */
.bg{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 20%, rgba(59,130,246,.25), transparent 45%),
    radial-gradient(circle at 80% 80%, rgba(37,99,235,.2), transparent 45%);
  filter:blur(60px);
  z-index:-1;
}

/* ===== Top Actions ===== */
.actions-top{
  position:fixed;
  top:24px;
  right:24px;
  display:flex;
  gap:12px;
  z-index:10;
}

.actions-top button{
  padding:12px 20px;
  border-radius:999px;
  border:none;
  font-weight:700;
  cursor:pointer;
}

.download{
  background:linear-gradient(135deg,var(--primary),var(--primary-glow));
  color:white;
}

.secondary{
  background:transparent;
  border:2px solid rgba(255,255,255,.3);
  color:white;
}

/* ===== Ticket Wrapper ===== */
.ticket-wrap{
  perspective:1400px;
}

/* ===== Ticket Card ===== */
.ticket{
  width:860px;
  background:linear-gradient(180deg,#ffffff,#f8fafc);
  color:#020617;
  border-radius:32px;
  padding:44px;
  box-shadow:
    0 60px 160px rgba(0,0,0,.55),
    inset 0 0 0 1px rgba(0,0,0,.06);
  transform-style:preserve-3d;
  position:relative;
}

/* ===== Header ===== */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:34px;
}

.airline{
  font-size:22px;
  font-weight:700;
  color:var(--primary);
}

.pnr{
  font-size:14px;
  font-weight:700;
  color:#475569;
}

/* ===== Route ===== */
.route{
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  margin-bottom:36px;
}

.city{
  text-align:center;
}

.city strong{
  font-size:34px;
}

.city span{
  display:block;
  font-size:13px;
  color:#64748b;
}

.arrow{
  font-size:26px;
  color:var(--primary);
}

/* ===== Info Grid ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:26px;
  margin-bottom:36px;
}

.label{
  font-size:12px;
  color:#64748b;
}

.value{
  font-size:16px;
  font-weight:600;
}

/* ===== Divider ===== */
.divider{
  height:1px;
  background:linear-gradient(90deg,transparent,#cbd5e1,transparent);
  margin:30px 0;
}

/* ===== Footer ===== */
.footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.qr{
  width:120px;
  height:120px;
  border-radius:16px;
  background:
    linear-gradient(135deg,#e5e7eb,#c7d2fe);
}

/* Hint */
.hint{
  position:absolute;
  bottom:-40px;
  width:100%;
  text-align:center;
  font-size:13px;
  color:var(--muted);
}
</style>
</head>
<body>

<div class="bg"></div>

<div class="actions-top">
  <button class="download" onclick="downloadImage()">Download Image</button>
  <button class="download" onclick="downloadPDF()">Download PDF</button>
  <button class="secondary" onclick="goHome()">Home</button>
</div>

<div class="ticket-wrap">
  <div class="ticket" id="ticket">

    <!-- HEADER -->
    <div class="header">
      <div class="airline">AKASA AIR</div>
      <div class="pnr">PNR · X9F2KQ</div>
    </div>

    <!-- ROUTE -->
    <div class="route">
      <div class="city">
        <strong>BLR</strong>
        <span>Bangalore</span>
      </div>
      <div class="arrow">✈</div>
      <div class="city">
        <strong>DEL</strong>
        <span>Delhi</span>
      </div>
    </div>

    <!-- INFO -->
    <div class="grid">
      <div>
        <div class="label">Passenger</div>
        <div class="value" id="name"></div>
      </div>
      <div>
        <div class="label">Flight</div>
        <div class="value">QP 1811</div>
      </div>
      <div>
        <div class="label">Seat</div>
        <div class="value" id="seat"></div>
      </div>
      <div>
        <div class="label">Class</div>
        <div class="value">Economy</div>
      </div>

      <div>
        <div class="label">Date</div>
        <div class="value">24 Mar 2026</div>
      </div>
      <div>
        <div class="label">Boarding</div>
        <div class="value">03:30 AM</div>
      </div>
      <div>
        <div class="label">Departure</div>
        <div class="value">04:00 AM</div>
      </div>
      <div>
        <div class="label">Gate</div>
        <div class="value">B4</div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- FOOTER -->
    <div class="footer">
      <div>
        <div class="label">Total Paid</div>
        <div class="value">SAR <span id="total"></span></div>
      </div>
      <div class="qr"></div>
    </div>

    <div class="hint">Move your cursor — premium 3D effect ✨</div>

  </div>
</div>

<script>
/* ===== DATA ===== */
const d = JSON.parse(localStorage.getItem("reviewData")) || {};
document.getElementById("name").innerText =
  `${d.title || ""} ${d.firstName || ""} ${d.lastName || ""}`;
document.getElementById("seat").innerText = d.seat || "-";
document.getElementById("total").innerText = d.total || "0";

/* ===== GSAP ENTRANCE ===== */
gsap.from(".ticket",{
  y:80,
  opacity:0,
  rotateX:14,
  duration:1.4,
  ease:"expo.out"
});

/* ===== FLOAT ===== */
gsap.to(".ticket",{
  y:-10,
  repeat:-1,
  yoyo:true,
  duration:3,
  ease:"sine.inOut"
});

/* ===== 3D TILT ===== */
const ticket = document.getElementById("ticket");
window.addEventListener("mousemove",e=>{
  const x = (e.clientX/window.innerWidth - 0.5) * 18;
  const y = (e.clientY/window.innerHeight - 0.5) * -18;

  gsap.to(ticket,{
    rotateY:x,
    rotateX:y,
    duration:0.6,
    ease:"power3.out"
  });
});

/* ===== DOWNLOAD IMAGE ===== */
function downloadImage(){
  html2canvas(ticket,{scale:2}).then(canvas=>{
    const link=document.createElement("a");
    link.download="boarding-pass.png";
    link.href=canvas.toDataURL();
    link.click();
  });
}

/* ===== DOWNLOAD PDF ===== */
function downloadPDF(){
  html2canvas(ticket,{scale:2}).then(canvas=>{
    const img=canvas.toDataURL("image/png");
    const { jsPDF } = window.jspdf;
    const pdf=new jsPDF("landscape","px",[canvas.width,canvas.height]);
    pdf.addImage(img,"PNG",0,0,canvas.width,canvas.height);
    pdf.save("boarding-pass.pdf");
  });
}

/* ===== HOME ===== */
function goHome(){
  gsap.to("body",{
    opacity:0,
    duration:.8,
    ease:"power4.in",
    onComplete:()=>{
      localStorage.clear();
      location.href="index.html";
    }
  });
}
</script>


</body>
</html>
